let charactersList=[];const url="https://api.disneyapi.dev/character?pageSize=50",list=document.querySelector(".list");function renderCharacters(e){""===e.imageUrl&&(e.imageUrl="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney");const t=document.createTextNode(""+e.name),a=document.createElement("p"),r=document.createElement("li"),c=document.createElement("img");c.classList.add("list__element--img"),c.src=""+e.imageUrl,r.classList.add("list__element"),a.classList.add("list__element--name"),a.appendChild(t),r.id=""+e._id,r.appendChild(c),r.appendChild(a),r.classList.add("element"),list.appendChild(r),eventClick()}function renderCharactersList(){const e=inputSearch.value,t=charactersList.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));list.innerHTML="";for(let e=0;e<t.length;e++){const a=t[e]._id;-1===charactersFav.findIndex(e=>e._id===a)?renderCharacters(t[e]):renderFavSearch(t[e])}eventClick()}fetch(url).then(e=>e.json()).then(e=>{charactersList=e.data,console.log(e.data),renderCharactersList(charactersList)});const favList=document.querySelector(".js_fav");let charactersFav=[];const sectionFav=document.querySelector(".section-fav"),sectionList=document.querySelector(".section-list"),charactersLS=JSON.parse(localStorage.getItem("characters")),resetListButtom=document.querySelector(".js_resetList");function showFavList(){0===charactersFav.length?sectionFav.classList.add("collapsed"):sectionFav.classList.remove("collapsed")}function renderFavCharacter(e){let t=e.imageUrl;const a=e._id,r=e.name;t||(t="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney");const c=document.createTextNode(r),s=document.createTextNode("X"),n=document.createElement("p"),i=document.createElement("li"),d=document.createElement("img"),l=document.createElement("buttom");d.classList.add("list__element--img"),d.src=t,i.classList.add("fav__element"),n.classList.add("list__element--name"),n.appendChild(c),l.classList.add("reset"),l.classList.add("js_reset"),l.title="Eliminar de la lista",l.appendChild(s),i.id=a,l.id=a,i.appendChild(d),i.appendChild(n),i.appendChild(l),i.classList.add("element"),favList.appendChild(i)}function renderFavCharacterList(){favList.innerHTML="";for(let e=0;e<charactersFav.length;e++)renderFavCharacter(charactersFav[e]);eventReset(),showFavList()}function handleClick(e){const t=parseInt(e.currentTarget.id),a=charactersList.find(e=>e._id===t),r=charactersFav.findIndex(e=>e._id===t);-1===r?charactersFav.push(a):charactersFav.splice(r,1),localStorage.setItem("characters",JSON.stringify(charactersFav)),renderFavCharacterList(),renderCharactersList()}function eventClick(){const e=document.querySelectorAll(".list .element");for(let t=0;t<e.length;t++)e[t].addEventListener("click",handleClick);renderFavCharacterList()}function init(){charactersLS&&(charactersFav=charactersLS,renderFavCharacterList(charactersFav))}function handleReset(e){const t=parseInt(e.currentTarget.id),a=(charactersFav.find(e=>e._id===t),charactersFav.findIndex(e=>e._id===t));charactersFav.splice(a,1),localStorage.setItem("characters",JSON.stringify(charactersFav)),renderFavCharacterList(),renderCharactersList()}function eventReset(){const e=document.querySelectorAll(".js_reset");for(let t=0;t<e.length;t++)e[t].addEventListener("click",handleReset)}function resetListFav(e){charactersFav=[],localStorage.setItem("characters",JSON.stringify(charactersFav)),renderFavCharacterList(),renderCharactersList()}init(),showFavList(),resetListButtom.addEventListener("click",resetListFav);const buttomSearch=document.querySelector(".js_submit"),inputSearch=document.querySelector(".js_inputSearch");function renderFavSearch(e){let t=e.imageUrl;const a=e._id,r=e.name;t||(t="https://via.placeholder.com/210x295/ffffff/555555/?text=Disney");const c=document.createTextNode(r),s=document.createElement("p"),n=document.createElement("li"),i=document.createElement("img");i.classList.add("list__element--img"),i.src=t,n.classList.add("fav__element"),s.classList.add("list__element--name"),s.appendChild(c),n.id=a,n.appendChild(i),n.appendChild(s),n.classList.add("element"),list.appendChild(n),eventClick()}function handleSearchButtom(e){e.preventDefault(),renderCharactersList()}buttomSearch.addEventListener("click",handleSearchButtom);